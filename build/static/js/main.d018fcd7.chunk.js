(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{19:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var o=n(2),r=n(14),i=n.n(r),s=(n(19),n(3)),a=n(4),c=n.n(a),l="http://localhost:3001/api/persons",u={getAll:function(){return c.a.get(l)},create:function(e){return c.a.post(l,e)},update:function(e,t){return c.a.put("".concat(l,"/").concat(e),t)},remove:function(e){return c.a.delete("".concat(l,"/").concat(e))}},d=n(0),f=function(e){var t=e.notificationObj,n=t.message,o=t.notificationType;return console.log("notificationObj: ",t),null===n?null:"ok"===o?Object(d.jsx)("div",{style:{color:"green",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"},children:n}):"error"===o?Object(d.jsx)("div",{style:{color:"red",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"},children:n}):(console.error("Invalid notification type: ",o),null)},b=function(e){var t=e.person,n=e.persons,o=e.setPersons,r=e.setFilterString;return Object(d.jsxs)("div",{children:[t.id," | ",t.name," ",t.number," ",Object(d.jsx)("button",{onClick:function(){return function(e){window.confirm("Delete ".concat(e.name,"?"))&&u.remove(e.id).then((function(t){if(console.log("delete promise fulfilled: ",t),r("Erase this to see change"),200===t.status){var i=JSON.parse(JSON.stringify(n)),s=i.find((function(t){return t.id===e.id})),a=i.indexOf(s);a>-1&&i.splice(a,1),o(i)}}))}(t)},children:"delete"})]})},p=function(e){var t=e.persons,n=e.filterString,o=e.setFilterString,r=e.setPhoneBookEntriesToShow;return Object(d.jsxs)("div",{children:["filter shown with",Object(d.jsx)("input",{value:n,onChange:function(e){o(e.target.value),console.log("persons in handleFilterStringChange(): ",t);var n=t.filter((function(t){return t.name.toLowerCase().includes(e.target.value.toLowerCase())}));r(n),console.log("filterResult: ",n)}})]})},h=function(e){var t=e.persons,n=e.setPersons,o=e.newName,r=e.setNewName,i=e.newNumber,s=e.setNewNumber,a=e.setFilterString,c=e.setNotificationObj;return Object(d.jsxs)("form",{onSubmit:function(e){e.preventDefault();var l={name:o,number:i};if(console.log("before duplicate check persons: ",t,"personObject: ",l),t.map((function(e){return e.name})).includes(o)){if(console.log("before update confirmation persons: ",t),window.confirm("".concat(o," is already added to the phonebook, replace the old number with a new one?"))){var d=t.find((function(e){return e.name===o}));console.log("persons: ",t,"existingPerson: ",d),u.update(d.id,l).then((function(e){if(console.log("update promise fulfilled: ",e),a("Erase this to see change"),200===e.status){var o=JSON.parse(JSON.stringify(t)),i=o.find((function(t){return t.id===e.data.id}));console.log("itemToUpdate: ",i);var l=o.indexOf(i);l>-1&&(o[l]=e.data),n(o),c({message:"Phone number of ".concat(e.data.name," changed to ").concat(e.data.number),notificationType:"ok"}),r(""),s("")}})).catch((function(e){console.log("update promise error: ",e),c({message:"Information of ".concat(l.name," has already been removed from the server"),notificationType:"error"})}))}}else u.create(l).then((function(e){n(t.concat(e.data)),c({message:"Added ".concat(e.data.name),notificationType:"ok"}),r(""),s(""),a("Erase this to see change")}))},children:[Object(d.jsxs)("div",{children:["name:",Object(d.jsx)("input",{value:o,onChange:function(e){console.log("input value changed: ",e.target.value),r(e.target.value)}}),Object(d.jsx)("br",{}),"number:",Object(d.jsx)("input",{value:i,onChange:function(e){console.log("input value changed: ",e.target.value),s(e.target.value)}})]}),Object(d.jsx)("div",{children:Object(d.jsx)("button",{type:"submit",children:"add"})})]})},j=function(e){var t=e.phoneBookEntriesToShow,n=e.persons,o=e.setPersons,r=e.setFilterString;return Object(d.jsx)("div",{children:t.map((function(e){return Object(d.jsx)("div",{children:Object(d.jsx)(b,{person:e,persons:n,setPersons:o,setFilterString:r})},e.name)}))})},g=function(){var e=Object(o.useState)([]),t=Object(s.a)(e,2),n=t[0],r=t[1],i=Object(o.useState)(""),a=Object(s.a)(i,2),c=a[0],l=a[1],b=Object(o.useState)(""),g=Object(s.a)(b,2),m=g[0],O=g[1],v=Object(o.useState)("Erase this to see change"),x=Object(s.a)(v,2),S=x[0],w=x[1],y=Object(o.useState)(n),N=Object(s.a)(y,2),k=N[0],P=N[1],E=Object(o.useState)({message:null,notificationType:"ok"}),T=Object(s.a)(E,2),F=T[0],B=T[1];return Object(o.useEffect)((function(){console.log("getAll effect start execution"),u.getAll().then((function(e){console.log("promise fulfilled: ",e.data),r(e.data)}))}),[]),Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{children:"Phonebook"}),Object(d.jsx)(f,{notificationObj:F}),Object(d.jsx)(p,{persons:n,filterString:S,setFilterString:w,setPhoneBookEntriesToShow:P}),Object(d.jsx)("h3",{children:"Add new"}),Object(d.jsx)(h,{persons:n,setPersons:r,newName:c,setNewName:l,newNumber:m,setNewNumber:O,setFilterString:w,setNotificationObj:B}),Object(d.jsx)("h3",{children:"Numbers"}),Object(d.jsx)("p",{children:"Note: Newly added persons will not automatically reflect in the following list. Please erase the filter input field to see the newly added person."}),Object(d.jsx)(j,{phoneBookEntriesToShow:k,persons:n,setPersons:r,setFilterString:w})]})};i.a.render(Object(d.jsx)(g,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.d018fcd7.chunk.js.map